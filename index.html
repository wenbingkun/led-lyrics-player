<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED演出歌词显示器</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="theme-classic">
    <div id="backgroundContainer" class="background-container"></div>
    <div class="background-overlay"></div>

    <div id="songInfo" class="song-info" style="display: none;">
        <div id="displaySongTitle" class="song-title"></div>
        <div id="displaySongIndex" class="song-index" style="display: none;"></div>
        <div id="lyricProgress" class="lyric-progress" style="display: none;">
            <span id="lyricProgressText"></span>
        </div>
    </div>

    <div class="lyrics-display">
        <div id="currentLyric" class="current-lyric">请上传LRC歌词文件</div>
        <div id="nextLyric" class="next-lyric">开始你的演出</div>
    </div>

    <div id="statusIndicator" class="status-indicator"></div>

    <div id="notificationContainer" class="notification-container"></div>

    <!-- 触发区域 -->
    <div class="trigger-zone" title="把鼠标移到这里显示控制台"></div>

    <div class="control-panel">
        <div class="panel-title">LED 歌词控制台</div>

        <div id="currentSongInfo" class="current-song-info" style="display: none;">
            <div id="currentSongName" class="current-song-name"></div>
            <div id="currentSongStatus" class="current-song-status"></div>
            <div id="offsetDisplay" style="font-size: 12px; color: #aaa; margin-top: 4px;"></div>
        </div>

        <div class="file-upload-group">
            <label class="upload-label">歌词文件 (.lrc/.txt)</label>
            <div style="display: flex; gap: 10px;">
                <input type="file" id="lrcFile" class="file-input" accept=".lrc,.txt" multiple>
                <button type="button" id="lrcFolderBtn" class="folder-button" title="选择歌词文件夹">📂</button>
            </div>
            <input type="file" id="lrcFolder" style="display: none;" webkitdirectory directory multiple>
            <div id="lrcFolderHint" class="compatibility-hint" style="display: none;"></div>
        </div>

        <div class="file-upload-group">
            <label class="upload-label">音频文件 (mp3/wav/flac...)</label>
            <div style="display: flex; gap: 10px;">
                <input type="file" id="audioFile" class="file-input" accept="audio/*,video/*" multiple>
                <button type="button" id="audioFolderBtn" class="folder-button" title="选择音频文件夹">📂</button>
            </div>
            <input type="file" id="audioFolder" style="display: none;" webkitdirectory directory multiple>
            <div id="audioFolderHint" class="compatibility-hint" style="display: none;"></div>
        </div>

        <div class="file-upload-group">
            <label class="upload-label">背景图片</label>
            <input type="file" id="backgroundFile" class="file-input" accept="image/*">
        </div>

        <div class="controls-row">
            <button id="prevButton" class="control-button" disabled title="上一曲 (P)">⏮</button>
            <button id="playButton" class="play-button" disabled title="播放/暂停 (空格)">▶</button>
            <button id="nextButton" class="control-button" disabled title="下一曲 (N)">⏭</button>
            <span id="currentTime" class="time-info">0:00</span>
            <div id="progressContainer" class="progress-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
            <span id="totalTime" class="time-info">0:00</span>
            <button id="modeToggleButton" class="control-button mode-toggle-button" disabled title="切换模式 (C)">🎶</button>
        </div>

        <div class="speed-controls">
            <button class="speed-button" data-speed="0.5">0.5x</button>
            <button class="speed-button active" data-speed="1.0">1.0x</button>
            <button class="speed-button" data-speed="1.5">1.5x</button>
            <button class="speed-button" data-speed="2.0">2.0x</button>
        </div>

        <div class="speed-controls">
            <button class="font-size-button" data-font-size="0.8">S</button>
            <button class="font-size-button active" data-font-size="1.3">M</button>
            <button class="font-size-button" data-font-size="1.8">L</button>
            <button class="font-size-button" data-font-size="2.4">XL</button>
            <button class="font-size-button" data-font-size="3.0">XXL</button>
        </div>

        <div class="speed-controls">
            <button class="theme-button active" data-theme="classic" title="经典白 (T键切换)">⚪ 经典</button>
            <button class="theme-button" data-theme="gold" title="流金岁月">🟡 流金</button>
            <button class="theme-button" data-theme="blue" title="赛博蓝">🔵 赛博</button>
            <button class="theme-button" data-theme="rainbow" title="炫彩霓虹">🌈 霓虹</button>
        </div>

        <div class="speed-controls">
            <button class="play-mode-button active" data-mode="loop" title="列表循环">🔁</button>
            <button class="play-mode-button" data-mode="list" title="列表播放">📋</button>
            <button class="play-mode-button" data-mode="single" title="单曲循环">🔂</button>
            <button class="play-mode-button" data-mode="random" title="随机播放">🔀</button>
        </div>

        <div class="speed-controls" style="margin-bottom: 5px;">
            <input type="text" id="lyricsSearch" class="search-input" placeholder="搜索歌词内容... (F键)">
            <button id="searchButton" class="search-button theme-button" title="搜索">🔍</button>
            <button id="clearSearch" class="search-button theme-button" title="清除">✕</button>
        </div>
        <div id="searchResults" class="search-results" style="display: none;"></div>

        <!-- 同步微调控制 -->
        <div id="syncControls" class="speed-controls" style="margin-top: 15px; display: none;">
            <div style="font-size: 12px; color: #aaa; margin-right: 10px;">同步微调:</div>
            <button class="sync-button" data-offset="-1.0">-1s</button>
            <button class="sync-button" data-offset="-0.1">-0.1s</button>
            <button id="resetOffset" class="sync-button" title="重置偏移">0</button>
            <button class="sync-button" data-offset="0.1">+0.1s</button>
            <button class="sync-button" data-offset="1.0">+1s</button>
        </div>

        <div class="playlist-section">
            <div class="playlist-header">
                播放列表
                <span id="playlistCount" class="playlist-count">0 首歌曲</span>
            </div>
            <div style="display: flex; gap: 8px; margin-bottom: 10px;">
                <button id="importPlaylist" class="playlist-action-btn" title="导入列表">📥</button>
                <input type="file" id="playlistFile" style="display: none;" accept=".json">
                <button id="exportPlaylist" class="playlist-action-btn" title="导出列表">📤</button>
                <button id="sortPlaylist" class="playlist-action-btn" title="按名称排序">AZ</button>
                <div style="flex: 1;"></div>
                <button id="clearPlaylist" class="playlist-action-btn" title="清空列表"
                    style="color: #ff6b6b; border-color: rgba(255, 107, 107, 0.3);">🗑️</button>
            </div>
            <div id="playlist" class="playlist">
                <div class="empty-playlist">还没有歌曲，请上传LRC文件</div>
            </div>
        </div>

        <div style="margin-top: 20px; text-align: center; color: rgba(255,255,255,0.3); font-size: 11px;">
            支持LRC歌词和MP3/WAV等音频格式<br>
            双击播放 • 拖拽排序 • 空格暂停<br>
            数字键1-9快速选歌 • 左右键快进
        </div>
    </div>

    <div id="dragOverlay" class="drag-overlay">
        <div class="drag-hint">
            <div>📂</div>
            <div>释放文件以添加</div>
        </div>
    </div>

    <!-- 模块化引入JS -->
    <script type="module" src="js/app.js"></script>
</body>

</html>

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED演出歌词显示器</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="theme-classic">
    <div id="backgroundContainer" class="background-container"></div>
    <div class="background-overlay"></div>

    <!-- 移除主屏幕左上角歌曲信息，保持画面纯净 -->
    <div id="songInfo" class="song-info" style="display: none !important;"></div>

    <div class="lyrics-display">
        <div id="currentLyric" class="current-lyric">请上传LRC歌词文件</div>
        <div id="nextLyric" class="next-lyric">开始你的演出</div>
    </div>

    <div id="statusIndicator" class="status-indicator"></div>

    <div id="notificationContainer" class="notification-container"></div>

    <!-- 触发区域 -->
    <div class="trigger-zone" title="把鼠标移到这里显示控制台"></div>

    <div class="control-panel">
        <!-- 1. 顶部状态栏 -->
        <div class="panel-header">
            <div class="panel-title">LED 控制台</div>
            <div id="loadedResourceHint" class="status-badge">未加载资源</div>
        </div>

        <!-- 2. 核心控制区 (常驻) -->
        <div class="hero-control">
            <div class="time-row">
                <span id="currentTime">0:00</span>
                <span id="totalTime">0:00</span>
            </div>
            <div id="progressContainer" class="progress-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
            
            <div class="control-buttons">
                <button id="prevButton" class="ctrl-btn sub" title="上一首">⏮</button>
                <button id="playButton" class="ctrl-btn main" disabled title="播放/暂停">▶</button>
                <button id="nextButton" class="ctrl-btn sub" title="下一首">⏭</button>
                <button id="modeToggleButton" class="ctrl-btn sub mode" title="切换模式">🎶</button>
            </div>
            
            <!-- 当前歌曲信息 -->
            <div id="currentSongInfo" class="mini-song-info">
                <span id="currentSongName">...</span>
                <span id="currentSongStatus" class="status-tag">准备就绪</span>
            </div>
        </div>

        <!-- 3. 内容切换区 (Tab Content) -->
        <div class="tab-content-area">
            
            <!-- Tab 1: 播放列表 (默认显示) -->
            <div id="tab-playlist" class="tab-pane active">
                <div class="playlist-toolbar">
                    <input type="text" id="lyricsSearch" class="search-input" placeholder="搜索歌曲...">
                    <div class="tool-group">
                        <button id="sortPlaylist" title="排序">AZ</button>
                        <button id="clearPlaylist" title="清空">🗑️</button>
                    </div>
                </div>
                <div class="playlist-header-row">
                    <span id="playlistCount">0 首</span>
                    <div class="play-mode-group">
                        <button class="play-mode-button active" data-mode="loop">🔁</button>
                        <button class="play-mode-button" data-mode="list">📋</button>
                        <button class="play-mode-button" data-mode="single">🔂</button>
                        <button class="play-mode-button" data-mode="random">🔀</button>
                    </div>
                </div>
                <div id="playlist" class="playlist-list">
                    <div class="empty-playlist">还没有歌曲，请导入文件</div>
                </div>
                <!-- 隐藏的文件输入框供导入用 -->
                <input type="file" id="playlistFile" style="display: none;" accept=".json">
            </div>

            <!-- Tab 2: 资源管理 -->
            <div id="tab-resources" class="tab-pane">
                <div class="resource-group">
                    <div class="res-header">
                        <span>歌词文件</span>
                        <div id="lrcPathDisplay" class="path-tag">未选择</div>
                    </div>
                    <div class="res-actions">
                        <input type="file" id="lrcFile" class="hidden-input" accept=".lrc,.txt" multiple>
                        <button id="lrcFileBtn" class="res-btn">📄 选择文件</button>
                        <button id="lrcFolderBtn" class="res-btn">📂 选择文件夹</button>
                    </div>
                    <input type="file" id="lrcFolder" style="display: none;" webkitdirectory directory multiple>
                    <div id="lrcFolderHint"></div>
                </div>

                <div class="resource-group">
                    <div class="res-header">
                        <span>音频伴奏</span>
                        <div id="audioPathDisplay" class="path-tag">未选择</div>
                    </div>
                    <div class="res-actions">
                        <input type="file" id="audioFile" class="hidden-input" accept="audio/*" multiple>
                        <button id="audioFileBtn" class="res-btn">🎵 选择文件</button>
                        <button id="audioFolderBtn" class="res-btn">📂 选择文件夹</button>
                    </div>
                    <input type="file" id="audioFolder" style="display: none;" webkitdirectory directory multiple>
                </div>

                <div class="resource-group">
                    <div class="res-header">
                        <span>背景图片</span>
                        <div id="bgPathDisplay" class="path-tag">未选择</div>
                    </div>
                    <div class="res-actions">
                        <input type="file" id="backgroundFile" class="hidden-input" accept="image/*">
                        <button id="backgroundFileBtn" class="res-btn">🖼️ 更换背景</button>
                    </div>
                </div>
                
                <div class="data-actions">
                    <button id="importPlaylistBtn" class="data-btn">📥 导入列表数据</button>
                    <button id="exportPlaylistBtn" class="data-btn">📤 导出列表数据</button>
                </div>
            </div>

            <!-- Tab 3: 设置与微调 -->
            <div id="tab-settings" class="tab-pane">
                <!-- 同步微调 -->
                <div id="syncControls" class="setting-block">
                    <div class="block-title">音频同步微调 (秒)</div>
                    <div class="segmented-control">
                        <button class="sync-button" data-offset="-0.5">-0.5</button>
                        <button class="sync-button" data-offset="-0.1">-0.1</button>
                        <button id="resetOffset" class="sync-button reset">0</button>
                        <button class="sync-button" data-offset="0.1">+0.1</button>
                        <button class="sync-button" data-offset="0.5">+0.5</button>
                    </div>
                    <div id="offsetDisplay" class="offset-value">0.0s</div>
                </div>

                <!-- 外观设置 -->
                <div class="setting-block">
                    <div class="block-title">播放速度</div>
                    <div class="segmented-control">
                        <button class="speed-button" data-speed="0.5">0.5x</button>
                        <button class="speed-button active" data-speed="1.0">1.0x</button>
                        <button class="speed-button" data-speed="1.5">1.5x</button>
                        <button class="speed-button" data-speed="2.0">2.0x</button>
                    </div>
                </div>

                <div class="setting-block">
                    <div class="block-title">字体大小</div>
                    <div class="segmented-control">
                        <button class="font-size-button" data-font-size="0.8">S</button>
                        <button class="font-size-button active" data-font-size="1.3">M</button>
                        <button class="font-size-button" data-font-size="1.8">L</button>
                        <button class="font-size-button" data-font-size="2.4">XL</button>
                    </div>
                </div>

                <div class="setting-block">
                    <div class="block-title">视觉主题</div>
                    <div class="segmented-control themes">
                        <button class="theme-button active" data-theme="classic">经典</button>
                        <button class="theme-button" data-theme="gold">流金</button>
                        <button class="theme-button" data-theme="blue">赛博</button>
                        <button class="theme-button" data-theme="rainbow">霓虹</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. 底部导航栏 (Tab Nav) -->
        <div class="tab-nav">
            <button class="tab-btn active" data-target="tab-playlist">🎵 列表</button>
            <button class="tab-btn" data-target="tab-resources">📂 资源</button>
            <button class="tab-btn" data-target="tab-settings">⚙️ 设置</button>
        </div>
    </div>

    <div id="dragOverlay" class="drag-overlay">
        <div class="drag-hint">
            <div>📂</div>
            <div>释放文件以添加</div>
        </div>
    </div>

    <!-- 自定义模态框 -->
    <div id="customModal" class="custom-modal" style="display: none;">
        <div class="modal-content">
            <div id="modalTitle" class="modal-title">提示</div>
            <div id="modalMessage" class="modal-message"></div>
            <div class="modal-actions">
                <button id="modalCancel" class="modal-btn cancel">取消</button>
                <button id="modalConfirm" class="modal-btn confirm">确定</button>
            </div>
        </div>
    </div>

    <!-- 模块化引入JS -->
    <script type="module" src="js/app.js"></script>
</body>

</html>
